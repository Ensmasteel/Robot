\hypertarget{_d_r_v8880_8h_source}{}\doxysection{DRV8880.\+h}
\label{_d_r_v8880_8h_source}\index{Ensmasteel\_Bot\_2020/Arduino\_Mega/Lib/StepperDriver/src/DRV8880.h@{Ensmasteel\_Bot\_2020/Arduino\_Mega/Lib/StepperDriver/src/DRV8880.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * DRV8880 -\/ 2A Stepper Motor Driver with AutoTune and Torque Control}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ * Copyright (C)2017 Laurentiu Badea}}
\DoxyCodeLine{5 \textcolor{comment}{ *}}
\DoxyCodeLine{6 \textcolor{comment}{ * This file may be redistributed under the terms of the MIT license.}}
\DoxyCodeLine{7 \textcolor{comment}{ * A copy of this license has been included with this distribution in the file LICENSE.}}
\DoxyCodeLine{8 \textcolor{comment}{ */}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#ifndef DRV8880\_H}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#define DRV8880\_H}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <Arduino.h>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}BasicStepperDriver.h"{}}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{class }\mbox{\hyperlink{class_d_r_v8880}{DRV8880}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_basic_stepper_driver}{BasicStepperDriver}} \{}
\DoxyCodeLine{15 \textcolor{keyword}{protected}:}
\DoxyCodeLine{16     \textcolor{keywordtype}{short} m0 = PIN\_UNCONNECTED;}
\DoxyCodeLine{17     \textcolor{keywordtype}{short} m1 = PIN\_UNCONNECTED;}
\DoxyCodeLine{18     \textcolor{keywordtype}{short} trq0 = PIN\_UNCONNECTED;}
\DoxyCodeLine{19     \textcolor{keywordtype}{short} trq1 = PIN\_UNCONNECTED;}
\DoxyCodeLine{20     \textcolor{comment}{// tWH(STEP) pulse duration, STEP high, min value}}
\DoxyCodeLine{21     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} step\_high\_min = 0;   \textcolor{comment}{// 0.47us}}
\DoxyCodeLine{22     \textcolor{comment}{// tWL(STEP) pulse duration, STEP low, min value}}
\DoxyCodeLine{23     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} step\_low\_min = 0;    \textcolor{comment}{// 0.47us}}
\DoxyCodeLine{24     \textcolor{comment}{// tWAKE wakeup time, nSLEEP inactive to STEP}}
\DoxyCodeLine{25     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} wakeup\_time = 1500;}
\DoxyCodeLine{26     \textcolor{comment}{// also 200ns between ENBL/DIR/Mx changes and STEP HIGH}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28     \textcolor{comment}{// Get max microsteps supported by the device}}
\DoxyCodeLine{29     \textcolor{keywordtype}{short} getMaxMicrostep() \textcolor{keyword}{override};}
\DoxyCodeLine{30 }
\DoxyCodeLine{31 \textcolor{keyword}{private}:}
\DoxyCodeLine{32     \textcolor{comment}{// microstep range (1, 16, 32 etc)}}
\DoxyCodeLine{33     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{short} MAX\_MICROSTEP = 16;}
\DoxyCodeLine{34 }
\DoxyCodeLine{35 \textcolor{keyword}{public}:}
\DoxyCodeLine{36     \textcolor{comment}{/*}}
\DoxyCodeLine{37 \textcolor{comment}{     * Basic connection: only DIR, STEP are connected.}}
\DoxyCodeLine{38 \textcolor{comment}{     * Microstepping controls should be hardwired.}}
\DoxyCodeLine{39 \textcolor{comment}{     */}}
\DoxyCodeLine{40     \mbox{\hyperlink{class_d_r_v8880}{DRV8880}}(\textcolor{keywordtype}{short} steps, \textcolor{keywordtype}{short} dir\_pin, \textcolor{keywordtype}{short} step\_pin);}
\DoxyCodeLine{41     \mbox{\hyperlink{class_d_r_v8880}{DRV8880}}(\textcolor{keywordtype}{short} steps, \textcolor{keywordtype}{short} dir\_pin, \textcolor{keywordtype}{short} step\_pin, \textcolor{keywordtype}{short} enable\_pin);}
\DoxyCodeLine{42     \textcolor{comment}{/*}}
\DoxyCodeLine{43 \textcolor{comment}{     * DIR, STEP and microstep control M0, M1}}
\DoxyCodeLine{44 \textcolor{comment}{     */}}
\DoxyCodeLine{45     \mbox{\hyperlink{class_d_r_v8880}{DRV8880}}(\textcolor{keywordtype}{short} steps, \textcolor{keywordtype}{short} dir\_pin, \textcolor{keywordtype}{short} step\_pin, \textcolor{keywordtype}{short} m0, \textcolor{keywordtype}{short} m1);}
\DoxyCodeLine{46     \mbox{\hyperlink{class_d_r_v8880}{DRV8880}}(\textcolor{keywordtype}{short} steps, \textcolor{keywordtype}{short} dir\_pin, \textcolor{keywordtype}{short} step\_pin, \textcolor{keywordtype}{short} enable\_pin, \textcolor{keywordtype}{short} m0, \textcolor{keywordtype}{short} m1);}
\DoxyCodeLine{47     \textcolor{comment}{/*}}
\DoxyCodeLine{48 \textcolor{comment}{     * Fully Wired -\/ DIR, STEP, microstep and current control}}
\DoxyCodeLine{49 \textcolor{comment}{     */}}
\DoxyCodeLine{50     \mbox{\hyperlink{class_d_r_v8880}{DRV8880}}(\textcolor{keywordtype}{short} steps, \textcolor{keywordtype}{short} dir\_pin, \textcolor{keywordtype}{short} step\_pin, \textcolor{keywordtype}{short} m0, \textcolor{keywordtype}{short} m1, \textcolor{keywordtype}{short} trq0, \textcolor{keywordtype}{short} trq1);}
\DoxyCodeLine{51     \mbox{\hyperlink{class_d_r_v8880}{DRV8880}}(\textcolor{keywordtype}{short} steps, \textcolor{keywordtype}{short} dir\_pin, \textcolor{keywordtype}{short} step\_pin, \textcolor{keywordtype}{short} enable\_pin, \textcolor{keywordtype}{short} m0, \textcolor{keywordtype}{short} m1, \textcolor{keywordtype}{short} trq0, \textcolor{keywordtype}{short} trq1);}
\DoxyCodeLine{52 }
\DoxyCodeLine{53     \textcolor{keywordtype}{void} begin(\textcolor{keywordtype}{short} rpm=60, \textcolor{keywordtype}{short} microsteps=1);}
\DoxyCodeLine{54 }
\DoxyCodeLine{55     \textcolor{keywordtype}{short} setMicrostep(\textcolor{keywordtype}{short} microsteps) \textcolor{keyword}{override};}
\DoxyCodeLine{56 }
\DoxyCodeLine{57     \textcolor{comment}{/*}}
\DoxyCodeLine{58 \textcolor{comment}{     * Torque DAC Control}}
\DoxyCodeLine{59 \textcolor{comment}{     * current percent value must be 25, 50, 75 or 100.}}
\DoxyCodeLine{60 \textcolor{comment}{     */}}
\DoxyCodeLine{61     \textcolor{keywordtype}{void} setCurrent(\textcolor{keywordtype}{short} percent=100);}
\DoxyCodeLine{62 \};}
\DoxyCodeLine{63 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// DRV8880\_H}}

\end{DoxyCode}
